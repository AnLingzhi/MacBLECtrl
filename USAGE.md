# MacBLECtrl 使用指南

## 简介

MacBLECtrl 是一个macOS命令行工具，用于扫描附近的蓝牙设备并获取它们的电量信息。该工具使用Swift和CoreBluetooth框架开发，可以帮助你快速了解周围蓝牙设备的状态。

## 功能详解

1. **设备扫描**：启动后自动扫描附近的蓝牙设备，显示设备名称、唯一标识符、信号强度和服务信息
2. **设备连接**：可以选择连接到特定设备
3. **电量读取**：对于支持电池服务的设备，可以读取并显示当前电量百分比
4. **重新扫描**：支持随时重新扫描以发现更多设备

## 使用步骤

1. 确保你的Mac电脑已开启蓝牙功能
2. 打开终端，进入项目目录
3. 运行以下命令编译项目：
   ```bash
   swift build
   ```
4. 运行程序：
   ```bash
   ./.build/debug/MacBLECtrl
   ```
5. 程序会自动扫描20秒钟，显示发现的设备（包括信号强度信息）
6. 根据提示输入设备编号连接设备，或输入'r'重新扫描，或输入'q'退出程序

## 注意事项

- 只有支持标准蓝牙电池服务(Battery Service, UUID: 180F)的设备才能读取电量
- 常见支持电量读取的设备包括：蓝牙耳机、键盘、鼠标等
- 如果连接设备后提示不支持电池服务，说明该设备不支持标准电量读取
- 程序需要蓝牙权限，首次运行可能会提示授权

## 故障排除

- 如果提示"蓝牙未开启"，请检查系统蓝牙是否已打开
- 如果扫描不到设备，请确保附近有蓝牙设备且处于可发现状态
- 如果连接失败，可能是设备已关机或超出连接范围